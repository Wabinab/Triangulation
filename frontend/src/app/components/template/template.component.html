<div class="pt-6"></div>

<div class="border border-2 border-primary">
  <nav class="navbar navbar-expand-sm">
    <div class="container-fluid">

      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link" role="button" (click)="save()">
          <fa-icon [icon]="faSave" size="xl"></fa-icon>Save
        </a></li>
        <div class="vl"></div>
        
        <!-- Different types -->
        <!-- Reminder (a header, and a single question of 'how') -->
      </ul>
    </div>
  </nav>
</div>

<div class="container row">
  <div class="col-md-4 col-xl-3 col-xxl-2 pt-3">
    <h5>{{ 'templ.Stages' | translate }}</h5>
    <ul class="navbar-nav">
      <li class="nav-item nav-sidebar" [ngClass]="is_active_stage(s.step)" *ngFor="let s of stages">
        <a class="nav-link" role="button" (click)="sel_stage(s.step)" (click.double)="edit_stage(s.step)">
          <ng-container *ngIf="!is_edit_stage(s.step)">{{ get_translate(s.name) }}</ng-container>
          <ng-container *ngIf="is_edit_stage(s.step)">
            <input type="text" class="form-control" [(ngModel)]="stage_name" #editStage (keydown.enter)="finish_edit_stage()" />
          </ng-container>
        </a>
      </li>

      <!-- Add new stage -->
      <li class="nav-item nav-sidebar">
        <a class="nav-link" role="button" (click)="add_stage()">
          <fa-icon [icon]="faAddStage"></fa-icon>
          Add Stage
        </a>
      </li>
    </ul>
  </div>

  <div class="col-md-8 col-xl-9 col-xxl-10 pt-3">
    <div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 row-cols-xxl-4 g-3" *ngFor="let p of pipeline">
      <ng-template [ngTemplateOutlet]="reminderTempl" [ngTemplateOutletContext]="{ $implicit: p }"></ng-template>
    </div>
  </div>
</div>

<!-- <button (click)="get_fivestep()">Get Fivestep</button> -->

<ng-template #reminderTempl let-p>
  <div class="col">
    <div class="card" (click)="openReminders(p.id)">
      <h5 class="card-header">
        {{ get_translate(p.title) }}
      </h5>
      <div class="card-body">
        <p class="card-text">{{ get_translate(p.questions[0].q) }}</p>
      </div>
    </div>
  </div>
</ng-template>

<!-- {{ pipeline | json }} -->
{{ template | json }}
<!-- <button (click)="load()">Manual Load</button> -->
<!-- <button (click)="test_focus()">Test Focus</button> -->